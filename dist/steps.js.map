{"version":3,"file":"steps.js","sources":["../src/index.js"],"sourcesContent":["\"use strict\";\n/**\n * A controller for stepwise UI components.\n * @module AlpineSteps\n */\n\n/**\n * Class for stepwise UI controller\n *\n * @property {string[]|Object[]} steps - Step items.\n * @property {string} currentStep - The name of the active step item.\n * @property {boolean} circular - If circular indexing is enabled.\n */\nexport class StepsController {\n  /**\n   * Create a controller\n   * @param {string[]|Object[]} model - Step items.\n   * @param {string} model[].name - The name of the step, if an array of Objects.\n   * @param {boolean} circular - Allow circular step indexing.\n   * @param {string} initialStep - The name of the step to start at.\n   */\n  constructor(model = [], circular = false, initialStep) {\n    this.steps = model;\n    this.currentStep = initialStep ? initialStep : model[0].name || model[0];\n    this.circular = circular;\n  }\n\n  /**\n   * Get the length of steps.\n   * @return {number} The length of the steps array.\n   */\n  get length() {\n    return this.steps.length;\n  }\n\n  /**\n   * Get the 1 based index of active step.\n   * @return {number} 1 based index of active step.\n   */\n  get currentStepIndex() {\n    // 1 based\n    return this.currentIndex + 1;\n  }\n\n  /**\n   * Get the 0 based index of active step.\n   * @return {number} 0 based index of active step.\n   */\n  get currentIndex() {\n    // 0 based\n    return this.steps.findIndex((step) => {\n      let name = step.name || step;\n      return name === this.currentStep;\n    });\n  }\n\n  /**\n   * Get the name for the first step item.\n   * @return {string} Name of first step item.\n   */\n  get firstStepName() {\n    const firstNode = this.steps[0];\n\n    return firstNode.name || firstNode;\n  }\n\n  /**\n   * Get the active step item.\n   * @return {string|Object} The active step item.\n   */\n  get currentStepNode() {\n    return this.steps.find(\n      (stepNode) => (stepNode.name || stepNode) === this.currentStep\n    );\n  }\n\n  /**\n   * Validate if step is active by name.\n   * @param {string} name - Name of step to check.\n   * @returns {boolean} If the step is active.\n   */\n  isActive(name) {\n    return this.currentStep === name;\n  }\n\n  /**\n   * Activate step by name.\n   * @param {string} to - Name of step to activate.\n   * @returns {boolean} If the step was activated.\n   */\n  transitionTo(to) {\n    const destination = to.name || to;\n\n    if (destination && destination !== this.currentStep) {\n      return this.activate(destination);\n    }\n\n    return false;\n  }\n\n  /**\n   * Activate the next step.\n   * @returns {boolean} If the next step is activated.\n   */\n  transitionToNext() {\n    const to = this.pickNext();\n\n    return this.transitionTo(to);\n  }\n\n  /**\n   * Activate the previous step.\n   * @returns {boolean} If the previous step is activated.\n   */\n  transitionToPrevious() {\n    const to = this.pickPrevious();\n\n    return this.transitionTo(to);\n  }\n\n  /**\n   * Set current step by name.\n   * @param {string|Object} step\n   * @param {string} step[].name - The name of the step, if an Object.\n   * @returns {boolean} If step is activated, without error.\n   */\n  activate(step) {\n    const name = step.name || step;\n    this.currentStep = name;\n\n    return true;\n  }\n\n  /**\n   * Get the next available step item.\n   * Note: If in circular mode, it will always return a step.\n   * @returns {boolean|string} The next step if available or false.\n   */\n  pickNext() {\n    const currentNode = this.steps[this.incrementIndex()];\n\n    if (currentNode) {\n      return currentNode.name || currentNode;\n    }\n\n    return false;\n  }\n\n  /**\n   * Get the previous available step item.\n   * Note: If in circular mode, it will always return a step.\n   * @returns {boolean|string} The previous step if available or false.\n   */\n  pickPrevious() {\n    const currentNode = this.steps[this.incrementIndex(-1)];\n\n    if (currentNode) {\n      return currentNode.name || currentNode;\n    }\n\n    return false;\n  }\n\n  /**\n   * Increment the index.\n   * Note: If in circular mode, it will always return an in bounds index.\n   * @param {number} increment - The value to increment by.\n   * @returns {number} The index after increment.\n   */\n  incrementIndex(increment = 1) {\n    let l = this.length;\n    let i = this.currentIndex + increment;\n\n    if (this.circular) {\n      i = ((i % l) + l) % l;\n    }\n\n    return i;\n  }\n\n  /**\n   * Get the 1 based index of the step by name.\n   * @param {string} nameQuery - The name of the step to check.\n   * @returns {number} The index of the step if available.\n   */\n  getIndex(nameQuery) {\n    return (\n      this.steps.findIndex((step) => {\n        let name = step.name || step;\n        return name === nameQuery;\n      }) + 1\n    );\n  }\n\n  /**\n   * Required by Alpine for automatic execution.\n   */\n  init() {}\n}\n\n/**\n * StepsController as a plain js object.\n * \n * @typedef {Object} StepsControllerObject\n * @property {string[]|Object[]} steps - Step items.\n * @property {string} currentStep - The name of the active step item.\n * @property {boolean} circular - If circular indexing is enabled.\n * @property {number} length - The length of the steps items.\n * @property {number} currentStepIndex - 1 based index of active step.\n * @property {number} currentIndex - 0 based index of active step.\n * @property {string} firstStepName - Name of first step item.\n * @property {string|Object} currentStepNode - The active step item.\n * @property {function(string=):boolean} isActive - Validate if step is active by name.\n * @property {function(string=):boolean} transitionTo - Activate step by name.\n * @property {function():boolean} transitionToNext - Activate the next step.\n * @property {function():boolean} transitionToPrevious - Activate the previous step.\n * @property {function(string=):boolean} activate - Set current step by name.\n * @property {function():boolean|string} pickNext - Get the next available step item.\n * @property {function():boolean|string} pickPrevious - Get the previous available step item.\n * @property {function(number=):number} incrementIndex - Increment the index.\n * @property {function(string=):number} getIndex - Get the 1 based index of the step by name.\n * @property {function():void} init - Required by Alpine for automatic execution.\n */\nvar StepsControllerObject;\n\n/**\n * Callback function for building a steps controller as a plain js object.\n *\n * [Usage Example]{@tutorial basic_usage.html}\n *\n * @function StepsComponent\n * @param {string[]|Object[]} model - Step items.\n * @param {boolean} circular - Allow circular step indexing.\n * @param {string} initialStep - Name of step to start with.\n * @returns {StepsControllerObject} A {@link StepsControllerObject} object\n */\nexport const StepsComponent = (model = [], circular = false, initialStep) => ({\n  steps: model,\n  circular: circular,\n  currentStep: initialStep ? initialStep : model[0].name || model[0],\n  get length() {\n    return this.steps.length;\n  },\n  get currentStepIndex() {\n    return this.currentIndex + 1;\n  },\n  get currentIndex() {\n    return this.steps.findIndex((step) => {\n      let name = step.name || step;\n      return name === this.currentStep;\n    });\n  },\n  get firstStepName() {\n    const firstNode = this.steps[0];\n\n    return firstNode.name || firstNode;\n  },\n  get currentStepNode() {\n    return this.steps.find(\n      (stepNode) => (stepNode.name || stepNode) === this.currentStep\n    );\n  },\n  isActive(name) {\n    return this.currentStep === name;\n  },\n  transitionTo(to) {\n    const destination = to.name || to;\n\n    if (destination && destination !== this.currentStep) {\n      this.activate(destination);\n    }\n\n    return false;\n  },\n  transitionToNext() {\n    const to = this.pickNext();\n\n    return this.transitionTo(to);\n  },\n  transitionToPrevious() {\n    const to = this.pickPrevious();\n\n    return this.transitionTo(to);\n  },\n  activate(step) {\n    const name = step.name || step;\n\n    if (this.getIndex(name) <= 0) {\n      return false;\n    }\n\n    this.currentStep = name;\n\n    return true;\n  },\n  pickNext() {\n    const currentNode = this.steps[this.incrementIndex()];\n\n    if (currentNode) {\n      return currentNode.name || currentNode;\n    }\n\n    return false;\n  },\n  pickPrevious() {\n    const currentNode = this.steps[this.incrementIndex(-1)];\n\n    if (currentNode) {\n      return currentNode.name || currentNode;\n    }\n\n    return false;\n  },\n  incrementIndex(increment = 1) {\n    let l = this.length;\n    let i = this.currentIndex + increment;\n\n    if (this.circular) {\n      i = ((i % l) + l) % l;\n    }\n\n    return i;\n  },\n  getIndex(nameQuery) {\n    return (\n      this.steps.findIndex((step) => {\n        let name = step.name || step;\n        return name === nameQuery;\n      }) + 1\n    );\n  },\n  init() {},\n});"],"names":["StepsController","constructor","model","circular","initialStep","steps","currentStep","name","length","currentStepIndex","currentIndex","findIndex","step","firstStepName","firstNode","currentStepNode","find","stepNode","isActive","transitionTo","to","destination","activate","transitionToNext","pickNext","transitionToPrevious","pickPrevious","currentNode","incrementIndex","increment","l","i","getIndex","nameQuery","init","StepsComponent"],"mappings":"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"}